<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save to Anytype</title>

    <link rel="stylesheet" href="style.css">

    <script src='LocalizationService.js'></script>
    <script src="Libraries/choices.min.js"></script>
    <script src='Libraries/jquery-3.7.1.min.js'></script>
    <script src='Libraries/Sortable.js'></script>
    <script src='Libraries/jscolor.js'></script>
</head>

<body>
    <div class="container">
        <h2><img src="assets/icon16.png" alt=""> Save to Anytype</h2>

        <!-- Auth -->
        <div id="authSection" class="card">
            <div class="tab-container">
                <div class="tab active" data-tab="challenge" data-locale-key="ChallengeAuth">Challenge Auth</div>
                <div class="tab" data-tab="apikey" data-locale-key="APIKey">API Key</div>
            </div>

            <!-- Challenge Auth Tab -->
            <div id="challengeTab" class="tab-content active">
                <div class="section-title" data-locale-key="AppNameHint">Challenge Auth</div>
                <div class="form-group">
                    <input type="text" id="appNameInput" data-locale-placeholder="AppName" placeholder="App name"
                        value="Save to Anytype">
                </div>
                <button id="startChallengeBtn" class="btn-primary">
                    <span data-locale-key="StartChallenge">Start Challenge</span>
                </button>
                <div id="codeSection" class="hidden">
                    <div class="form-group" style="margin-top: 15px;">
                        <div class="section-title" data-locale-key="Enter4digit">Enter the 4-digit code displayed in Anytype</div>
                        <input type="text" id="codeInput" placeholder="1234" maxlength="4">
                    </div>
                    <button id="verifyCodeBtn" class="btn-primary">
                        <span data-locale-key="Verify">Verify</span>
                    </button>
                </div>
            </div>
            <!-- API Key Tab -->
            <div id="apikeyTab" class="tab-content">
                <div class="section-title" data-locale-key="ConnectWithAPIKey">Connect with API Key</div>
                <div class="form-group">
                    <input type="password" id="apiKeyInput" data-locale-placeholder="EnterYourAPIKey" placeholder="Enter your API Key">
                </div>
                <button id="connectBtn" class="btn-primary">
                    <span data-locale-key="Connect">Connect</span>
                </button>
            </div>

        </div>

        <div id="mainSection" class="hidden">
            <button id="settingsButton" class="btn-right-top">
                <img id="settingsButtonIcon" class="icon" width="25px" height="25px" src="assets/settings.svg" alt="">
            </button>
            <div id="mainSectionAnimation">
                <div id="handlerForLoadedForms" class="card-smaller-padding column-flex-table">
                </div>
                <div class="form-card">
                    <!--<img class="new-form-icon" src="assets/new-form.svg" alt="">-->
                    <div data-locale-key="FormWelcomeText">You need create a form before saving an object to Anytype. You can think of forms as templates. Forms reflect the way objects are saved.</div>
                </div>
                    <button id="createFormButton" class="btn-primary">
                    <span id="createFormButtonText" data-locale-key="CreateForm">Create Form</span>
                </button>
            </div>
        </div>

        <div id="createFormSection" class="hidden">
            <div id="createFormTipButton" class="btn-left-top-tip">
                ?
            </div>

            <button id="mainSectionButton" class="btn-right-top">
                <img id="crossButtonIcon" class="icon" width="20px" height="20px" src="assets/cross.svg" alt="">
            </button>

            <div id="createFormSectionAnimation">
                <div class="card">
                    <div class="form-group">
                        <div class="section-title" data-locale-key="SelectSpace">Select Space</div>

                        <select id="spaceSelect">
                            <option value="" data-locale-key="SelectSpace">Select Space</option>
                        </select>
                    </div>

                    <div id="typeSection" class="hidden">
                        <div class="section-title" data-locale-key="SelectType">Select Type</div>
                        <div class="form-group">
                            <select id="typeSelect">
                            </select>
                        </div>
                    </div>

                    <div id="FormNameInputSection" class="form-group" class="hidden">
                        <div class="section-title" data-locale-key="FormNameInput">FormNameInput</div>
                        <input id="FormNameInput" type="text" data-locale-placeholder="FormNameInput" placeholder="Form Name Input">
                    </div>

                    <div id="collectionSection" class="hidden">
                        <div class="section-title" data-locale-key="SelectCollection">Select Collection</div>
                        <div class="form-group">
                            <div id="collectionsList">
                                <div class="collection-item" data-locale-key="CollectionsLoading">Collections are loading...</div>
                            </div>
                        </div>
                    </div>

                    <div id="objectTemplateSection" class="hidden">
                        <div class="section-title" data-locale-key="SelectObjectTemplate">Select Object Template</div>
                        <div class="form-group">
                            <select id="objectTemplateSectionSelect">
                            </select>
                        </div>
                    </div>
                </div>

                <div id="propertiesSection" class="hidden">
                    <div class="section-title" data-locale-key="ObjectProperties">Object Properties</div>
                    <div class="card" id="propertiesListHandler">
                    </div>
                </div>

                <button id="saveFormBtn" class="btn-primary">
                    <span id="saveFormBtnText" data-locale-key="SaveForm">Save Form</span>
                </button>
            </div>
        </div>
        
        <div id="settingsSection" class="hidden">
            <button id="mainSectionButton2" class="btn-right-top">
                <img id="crossButtonIcon2" class="icon" width="20px" height="20px" src="assets/cross.svg" alt="">
            </button>

            <div id="settingsSectionAnimation">
                <div class="section-title" data-locale-key="ReopenSettings">ReopenSettings</div>
                <div class="card">
                    
                    <div class="form-group">
                        <div class="section-title" data-locale-key="SelectLanguage">Select Language</div>
                        <select id="languageSelect">
                        </select>
                    </div>

                    <div class="form-group">
                        <div class="section-title" data-locale-key="SelectTheme">Select Theme</div>
                        <select id="themeSelect">
                            <option value="dark" data-locale-key="Dark">Dark</option>
                            <option value="white" data-locale-key="White">Light</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <div class="section-title" data-locale-key="WhatDoOnStart">WhatDoOnStart</div>
                        <select id="whatDoOnStartSelect">
                            <option value="Nothing" data-locale-key="Nothing">Nothing</option>
                            <option value="OpenFirstForm" data-locale-key="OpenFirstForm">OpenFirstForm</option>
                            <option value="OpenLastUsedForm" data-locale-key="OpenLastUsedForm">OpenLastUsedForm</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <div class="section-title" data-locale-key="ChooseAccentColor">choose an accent color</div>
                        <input id="colorInput" class="jscolor" value="ab2567">
                    </div>

                    <div class="form-group">
                        <div class="section-title" data-locale-key="BugNote">If you found a bug, write about this to GitHub:</div>
                        <button id="openGitHubBtn" class="btn-primary">
                            <span id="openGitHubBtnText" data-locale-key="OpenGitHub">Open GitHub</span>
                        </button>
                    </div>

                    <div class="form-group">
                        <button id="disconnectBtn" class="btn-danger" data-locale-key="DisconnectAnytype">
                            Disconnect Anytype
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <div id="SaveToAnytypeVersion" class="section-title" style="margin-top: -10px; text-align: center;">
                        auto insert from manifest
                    </div>
                </div>
            </div>
        </div>

        <div id="confirmDeleteFormSection" class="hidden">
            <button id="mainSectionButton3" class="btn-right-top">
                <img id="crossButtonIcon3" class="icon" width="20px" height="20px" src="assets/cross.svg" alt="">
            </button>

            <div id="confirmDeleteFormSectionAnimation">
                <div>
                    <div class="card">
                        <div class="section-title" data-locale-key="DeleteFormQuestion">are you sure you want delete form?</div>
                        <button id="deleteFormBtn" class="btn-danger" data-locale-key="ConfirmDeleteForm">
                            Delete form
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="saveObjectSection" class="hidden">
            <button id="mainSectionButton4" class="btn-right-top">
                <img id="crossButtonIcon" class="icon" width="20px" height="20px" src="assets/cross.svg" alt="">
            </button>

            <div id="saveObjectSectionAnimation">
                <div class="card">
                    <h3 id="objectNameToSave">ObjectNameToSave</h3>
                </div>

                <div class="card" id="propertiesSaveObjectListWithoutDefaultValueHandler">
                </div>

                <div class="card" id="propertiesSaveObjectListWithDefaultValueHandler">
                </div>

                <!-- Save button -->
                <button id="saveObjectBtn" class="btn-primary">
                    <span id="saveObjectBtnText" data-locale-key="SaveObjectButton">SaveObjectButton</span>
                </button>
            </div>
        </div>
        
        <div id="objectSavedSection" class="hidden">
            <div id="objectSavedSectionAnimation">
                <div class="card">
                    <div class="section-title" data-locale-key="objectSavedSection">objectSavedSection</div>
                </div>

                <button id="OpenInAnytypeBtn" class="btn-primary">
                    <span id="OpenInAnytypeBtnText" data-locale-key="OpenInAnytype">OpenInAnytype</span>
                </button>
            </div>
        </div>

        <div id="blockedSection" class="hidden">
            <div id="blockedSectionAnimation">
                <div class="card">
                    <div id="blockedSectionText" class="section-title">blockedSection</div>
                </div>

                <button id="OpenAnytypeBtn" class="btn-primary">
                    <span id="OpenAnytypeBtnText" data-locale-key="OpenAnytype">OpenAnytype</span>
                </button>
            </div>
        </div>

        <div id="loadingSection" class="hidden">
            <div class="card">
                <div class="section-title" data-locale-key="Loading">blockedSection</div>
            </div>
        </div>

        <!-- Status messages -->
        <div id="status" class="status hidden"></div>
    </div>

    <script src="popup.js"></script>
</body>

</html>